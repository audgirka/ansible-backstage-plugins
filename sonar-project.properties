# Required metadata
sonar.projectKey=ansible_ansible-backstage-plugins
sonar.organization=ansible
sonar.host.url=https://sonarcloud.io
sonar.token=${SONAR_TOKEN}
sonar.projectName=ansible-backstage-plugins

# Source and test directories
sonar.sources=plugins
sonar.tests=plugins
sonar.test.inclusions=**/*.test.ts,**/*.test.tsx,**/*.test.js,**/*.test.jsx
sonar.exclusions=**/*.test.ts,**/*.test.tsx,**/*.test.js,**/*.test.jsx,**/.eslintrc.js,**/node_modules/**,**/dist/**,**/coverage/**

# Coverage report paths
# Use filtered coverage file (lcov-plugins.info) in CI to avoid warnings about packages/ paths
# Falls back to lcov.info for local runs
sonar.javascript.lcov.reportPaths=./coverage/lcov-plugins.info,./coverage/lcov.info

# Source file encoding
sonar.sourceEncoding=UTF-8

# TypeScript specific settings
sonar.typescript.tsconfigPath=tsconfig.json

# Duplicate code detection
sonar.cpd.exclusions=**/*.test.ts,**/*.test.tsx

# Issue severity mappings
sonar.issue.ignore.multicriteria=e1,e2
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S6544
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.test.ts
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S6544
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.test.tsx
